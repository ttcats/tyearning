{"version":3,"sources":["webpack:///static/js/11.e153e8c7e897045d317d.js","webpack:///work_flow.vue?468f","webpack:///./src/components/Search/work_flow.vue?feb2*","webpack:///./src/components/Search/work_flow.vue?f1a6*","webpack:///./src/components/Search/work_flow.vue?930e*","webpack:///./src/components/Search/work_flow.vue?3047"],"names":["webpackJsonp","192","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_js_cookie__","__WEBPACK_IMPORTED_MODULE_0_js_cookie___default","n","__WEBPACK_IMPORTED_MODULE_1_axios__","__WEBPACK_IMPORTED_MODULE_1_axios___default","__WEBPACK_IMPORTED_MODULE_2__libs_util__","name","props","data","stepData","title","describe","a","get","step","remark","timer","computer_room","connection_name","person","export","stepList1","stepRules","opinion","required","message","trigger","basename","item","personlist","computer_roomlist","datalist","connection_name_list","basenamelist","sqllist","methods","Connection_Name","val","this","ScreenConnection","filter","handleSubmit","_this","$refs","validate","valid","put","url","mode","instructions","audit","then","$router","push","mounted","_this2","permissions_type","res","catch","error","ajanxerrorcode","193","exports","i","version","sources","names","mappings","file","sourcesContent","sourceRoot","214","content","locals","216","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","attrs","span","type","show-icon","slot","ref","model","rules","label-width","label","prop","on","on-change","callback","$$v","$set","expression","_l","key","filterable","autosize","minRows","maxRows","placeholder","staticStyle","width","click","margin-left","staticRenderFns","81","injectStyle","ssrContext","Component"],"mappings":"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","file":"static/js/11.e153e8c7e897045d317d.js","sourcesContent":["webpackJsonp([11],{\n\n/***/ 192:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_js_cookie__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_js_cookie___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_js_cookie__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__libs_util__ = __webpack_require__(2);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'work_flow',\n  props: ['msg'],\n  data: function data() {\n    return {\n      stepData: {\n        title: 'Yearning SQL查询系统',\n        describe: '\\u6B22\\u8FCE\\u4F60\\uFF01 ' + __WEBPACK_IMPORTED_MODULE_0_js_cookie___default.a.get('user')\n      },\n      step: {\n        remark: '',\n        timer: '',\n        computer_room: '',\n        connection_name: '',\n        person: '',\n        export: '0'\n      },\n      stepList1: [{\n        title: '提交',\n        describe: '提交查询申请'\n      }, {\n        title: '审核',\n        describe: '等待审核结果'\n      }, {\n        title: '查询',\n        describe: '审核完毕，进入查询页面'\n      }],\n      stepRules: {\n        opinion: [{ required: true, message: '请填写查询说明', trigger: 'blur' }],\n        timer: [{ required: true, message: '请填写查询时限', trigger: 'blur' }],\n        computer_room: [{\n          required: true,\n          message: '机房地址不得为空',\n          trigger: 'change'\n        }],\n        connection_name: [{\n          required: true,\n          message: '连接名不得为空',\n          trigger: 'change'\n        }],\n        basename: [{\n          required: true,\n          message: '数据库名不得为空',\n          trigger: 'change'\n        }],\n        person: [{\n          required: true,\n          message: '审核人不得为空',\n          trigger: 'change'\n        }]\n      },\n      item: {},\n      personlist: [],\n      computer_roomlist: __WEBPACK_IMPORTED_MODULE_2__libs_util__[\"a\" /* default */].computer_room,\n      datalist: {\n        connection_name_list: [],\n        basenamelist: [],\n        sqllist: [],\n        computer_roomlist: __WEBPACK_IMPORTED_MODULE_2__libs_util__[\"a\" /* default */].computer_room\n      }\n    };\n  },\n\n  methods: {\n    Connection_Name: function Connection_Name(val) {\n      this.datalist.connection_name_list = [];\n      this.datalist.basenamelist = [];\n      this.step.connection_name = '';\n      this.step.basename = '';\n      if (val) {\n        this.ScreenConnection(val);\n      }\n    },\n    ScreenConnection: function ScreenConnection(val) {\n      this.datalist.connection_name_list = this.item.filter(function (item) {\n        if (item.computer_room === val) {\n          return item;\n        }\n      });\n    },\n    handleSubmit: function handleSubmit() {\n      var _this = this;\n\n      this.$refs['step'].validate(function (valid) {\n        if (valid) {\n          __WEBPACK_IMPORTED_MODULE_1_axios___default.a.put(__WEBPACK_IMPORTED_MODULE_2__libs_util__[\"a\" /* default */].url + '/query_worklf', {\n            'mode': 'put',\n            'instructions': _this.step.opinion,\n            'timer': _this.step.timer,\n            'connection_name': _this.step.connection_name,\n            'computer_room': _this.step.computer_room,\n            'export': _this.step.export,\n            'audit': _this.step.person\n          }).then(function () {\n            _this.$router.push({\n              name: 'queryready'\n            });\n          });\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    __WEBPACK_IMPORTED_MODULE_1_axios___default.a.put(__WEBPACK_IMPORTED_MODULE_2__libs_util__[\"a\" /* default */].url + '/workorder/connection', { 'permissions_type': 'query' }).then(function (res) {\n      _this2.item = res.data['connection'];\n      _this2.personlist = res.data['assigend'];\n    }).catch(function (error) {\n      __WEBPACK_IMPORTED_MODULE_2__libs_util__[\"a\" /* default */].ajanxerrorcode(_this2, error);\n    });\n    __WEBPACK_IMPORTED_MODULE_1_axios___default.a.put(__WEBPACK_IMPORTED_MODULE_2__libs_util__[\"a\" /* default */].url + '/query_worklf', { 'mode': 'status' }).then(function (res) {\n      if (res.data === 1) {\n        _this2.$router.push({\n          name: 'querypage'\n        });\n      } else if (res.data === 2) {\n        _this2.$router.push({\n          name: 'queryready'\n        });\n      }\n    });\n  }\n});\n\n/***/ }),\n\n/***/ 193:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(79)(true);\n// imports\n\n\n// module\nexports.push([module.i, \".step-header-con{text-align:center}.step-header-con h3{margin:10px 0}.step-header-con h5{margin:0 0 5px}.step-content{padding:5px 20px 26px}.step-content,.step-form{margin-bottom:20px;border-bottom:1px solid #dbdddf}.step-form{padding-bottom:10px}\", \"\", {\"version\":3,\"sources\":[\"/Users/yeshaobin/Yearning/webpage/src/components/Search/work_flow.vue\"],\"names\":[],\"mappings\":\"AACA,iBACE,iBAAmB,CACpB,AACD,oBACE,aAAe,CAChB,AACD,oBACE,cAAgB,CACjB,AACD,cACE,qBAAuB,CAGxB,AACD,yBAHE,mBAAoB,AACpB,+BAAiC,CAMlC,AAJD,WACE,mBAAqB,CAGtB\",\"file\":\"work_flow.vue\",\"sourcesContent\":[\"\\n.step-header-con {\\n  text-align: center;\\n}\\n.step-header-con h3 {\\n  margin: 10px 0;\\n}\\n.step-header-con h5 {\\n  margin: 0 0 5px;\\n}\\n.step-content {\\n  padding: 5px 20px 26px;\\n  margin-bottom: 20px;\\n  border-bottom: 1px solid #dbdddf;\\n}\\n.step-form {\\n  padding-bottom: 10px;\\n  border-bottom: 1px solid #dbdddf;\\n  margin-bottom: 20px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 214:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(193);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(80)(\"51de479c\", content, true, {});\n\n/***/ }),\n\n/***/ 216:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('Row', [_c('Card', [_c('div', {\n    staticClass: \"step-header-con\"\n  }, [_c('h3', [_vm._v(_vm._s(_vm.stepData.title))]), _vm._v(\" \"), _c('h5', [_vm._v(_vm._s(_vm.stepData.describe))])]), _vm._v(\" \"), _c('p', {\n    staticClass: \"step-content\"\n  }), _vm._v(\" \"), _c('Row', [_c('i-col', {\n    attrs: {\n      \"span\": \"8\"\n    }\n  }, [_c('Alert', {\n    attrs: {\n      \"type\": \"warning\",\n      \"show-icon\": \"\"\n    }\n  }, [_vm._v(\"\\n          注意事项:\\n          \"), _c('span', {\n    attrs: {\n      \"slot\": \"desc\"\n    },\n    slot: \"desc\"\n  }, [_vm._v(\"\\n            1.必须填写查询说明\\n            \"), _c('br'), _vm._v(\"\\n            2.根据查询条件预估所需的查询时间\\n            \"), _c('br'), _vm._v(\"\\n            3.所有提交的查询语句均会进行审计记录\\n            \"), _c('br'), _vm._v(\"\\n            4.仅支持select语句,不可使用非查询语句\\n            \"), _c('br'), _vm._v(\"\\n            5.已限制最大limit数，如自己输入的limit数大于平台配置的最大limit数则已平台配置的Limit数为准\\n          \")])])], 1), _vm._v(\" \"), _c('i-col', {\n    attrs: {\n      \"span\": \"12\"\n    }\n  }, [_c('Form', {\n    ref: \"step\",\n    attrs: {\n      \"model\": _vm.step,\n      \"rules\": _vm.stepRules,\n      \"label-width\": 150\n    }\n  }, [_c('FormItem', {\n    attrs: {\n      \"label\": \"机房:\",\n      \"prop\": \"computer_room\"\n    }\n  }, [_c('Select', {\n    on: {\n      \"on-change\": _vm.Connection_Name\n    },\n    model: {\n      value: (_vm.step.computer_room),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"computer_room\", $$v)\n      },\n      expression: \"step.computer_room\"\n    }\n  }, _vm._l((_vm.datalist.computer_roomlist), function(i) {\n    return _c('Option', {\n      key: i,\n      attrs: {\n        \"value\": i\n      }\n    }, [_vm._v(_vm._s(i))])\n  }))], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"连接名:\",\n      \"prop\": \"connection_name\"\n    }\n  }, [_c('Select', {\n    attrs: {\n      \"filterable\": \"\"\n    },\n    model: {\n      value: (_vm.step.connection_name),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"connection_name\", $$v)\n      },\n      expression: \"step.connection_name\"\n    }\n  }, _vm._l((_vm.datalist.connection_name_list), function(i) {\n    return _c('Option', {\n      key: i.connection_name,\n      attrs: {\n        \"value\": i.connection_name\n      }\n    }, [_vm._v(_vm._s(i.connection_name))])\n  }))], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"审核人:\",\n      \"prop\": \"person\"\n    }\n  }, [_c('Select', {\n    attrs: {\n      \"filterable\": \"\"\n    },\n    model: {\n      value: (_vm.step.person),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"person\", $$v)\n      },\n      expression: \"step.person\"\n    }\n  }, _vm._l((_vm.personlist), function(i) {\n    return _c('Option', {\n      key: i,\n      attrs: {\n        \"value\": i\n      }\n    }, [_vm._v(_vm._s(i))])\n  }))], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"是否需要导出数据:\",\n      \"prop\": \"export\"\n    }\n  }, [_c('RadioGroup', {\n    model: {\n      value: (_vm.step.export),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"export\", $$v)\n      },\n      expression: \"step.export\"\n    }\n  }, [_c('Radio', {\n    attrs: {\n      \"label\": \"1\"\n    }\n  }, [_vm._v(\"是\")]), _vm._v(\" \"), _c('Radio', {\n    attrs: {\n      \"label\": \"0\"\n    }\n  }, [_vm._v(\"否\")])], 1)], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"查询说明：\",\n      \"prop\": \"opinion\"\n    }\n  }, [_c('Input', {\n    attrs: {\n      \"type\": \"textarea\",\n      \"autosize\": {\n        minRows: 4,\n        maxRows: 8\n      },\n      \"placeholder\": \"请填写查询说明\"\n    },\n    model: {\n      value: (_vm.step.opinion),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"opinion\", $$v)\n      },\n      expression: \"step.opinion\"\n    }\n  })], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"查询时限：\",\n      \"prop\": \"timer\"\n    }\n  }, [_c('Input', {\n    attrs: {\n      \"placeholder\": \"请填写查询时限，单位：分钟 （只填写数字）\"\n    },\n    model: {\n      value: (_vm.step.timer),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"timer\", $$v)\n      },\n      expression: \"step.timer\"\n    }\n  })], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"\"\n    }\n  }, [_c('Button', {\n    staticStyle: {\n      \"width\": \"100px\"\n    },\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.handleSubmit\n    }\n  }, [_vm._v(\"提交\")])], 1)], 1)], 1)], 1), _vm._v(\" \"), _c('Steps', {\n    staticStyle: {\n      \"margin-left\": \"10%\"\n    }\n  }, _vm._l((_vm.stepList1), function(item) {\n    return _c('Step', {\n      key: item.title,\n      attrs: {\n        \"title\": item.title,\n        \"content\": item.describe\n      }\n    })\n  }))], 1)], 1)], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 81:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(214)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(192),\n  /* template */\n  __webpack_require__(216),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/11.e153e8c7e897045d317d.js","<template>\n  <div>\n    <Row>\n      <Card>\n        <div class=\"step-header-con\">\n          <h3>{{ stepData.title }}</h3>\n          <h5>{{ stepData.describe }}</h5>\n        </div>\n        <p class=\"step-content\"></p>\n        <Row>\n        <i-col span=\"8\">\n          <Alert type=\"warning\" show-icon>\n            注意事项:\n            <span slot=\"desc\">\n              1.必须填写查询说明\n              <br>\n              2.根据查询条件预估所需的查询时间\n              <br>\n              3.所有提交的查询语句均会进行审计记录\n              <br>\n              4.仅支持select语句,不可使用非查询语句\n              <br>\n              5.已限制最大limit数，如自己输入的limit数大于平台配置的最大limit数则已平台配置的Limit数为准\n            </span>\n          </Alert>\n        </i-col>\n        <i-col span=\"12\">\n          <Form ref=\"step\" :model=\"step\" :rules=\"stepRules\" :label-width=\"150\">\n            <FormItem label=\"机房:\" prop=\"computer_room\">\n              <Select v-model=\"step.computer_room\" @on-change=\"Connection_Name\">\n                <Option v-for=\"i in datalist.computer_roomlist\" :key=\"i\" :value=\"i\" >{{i}}</Option>\n              </Select>\n            </FormItem>\n\n            <FormItem label=\"连接名:\" prop=\"connection_name\">\n              <Select v-model=\"step.connection_name\" filterable>\n                <Option v-for=\"i in datalist.connection_name_list\" :value=\"i.connection_name\" :key=\"i.connection_name\">{{ i.connection_name }}</Option>\n              </Select>\n            </FormItem>\n            <FormItem label=\"审核人:\" prop=\"person\">\n              <Select v-model=\"step.person\" filterable>\n                <Option v-for=\"i in personlist\" :value=\"i\" :key=\"i\">{{ i }}</Option>\n              </Select>\n            </FormItem>\n            <FormItem label=\"是否需要导出数据:\" prop=\"export\">\n              <RadioGroup v-model=\"step.export\">\n                <Radio label=\"1\">是</Radio>\n                <Radio label=\"0\">否</Radio>\n              </RadioGroup>\n            </FormItem>\n            <FormItem label=\"查询说明：\" prop=\"opinion\">\n              <Input v-model=\"step.opinion\" type=\"textarea\" :autosize=\"{minRows: 4,maxRows: 8}\" placeholder=\"请填写查询说明\"/>\n            </FormItem>\n            <FormItem label=\"查询时限：\" prop=\"timer\">\n              <Input v-model=\"step.timer\"  placeholder=\"请填写查询时限，单位：分钟 （只填写数字）\"/>\n            </FormItem>\n            <FormItem label=\"\">\n              <Button  @click=\"handleSubmit\" style=\"width:100px;\" type=\"primary\">提交</Button>\n            </FormItem>\n          </Form>\n        </i-col>\n        </Row>\n        <Steps style=\"margin-left: 10%\">\n          <Step v-for=\"item in stepList1\" :title=\"item.title\" :content=\"item.describe\" :key=\"item.title\"></Step>\n        </Steps>\n      </Card>\n    </Row>\n  </div>\n</template>\n\n<script>\n  import Cookies from 'js-cookie'\n  import axios from 'axios'\n  import util from '../../libs/util'\n  export default {\n    name: 'work_flow',\n    props: ['msg'],\n    data () {\n      return {\n        stepData: {\n          title: 'Yearning SQL查询系统',\n          describe: `欢迎你！ ${Cookies.get('user')}`\n        },\n        step: {\n          remark: '',\n          timer: '',\n          computer_room: '',\n          connection_name: '',\n          person: '',\n          export: '0'\n        },\n        stepList1: [\n          {\n            title: '提交',\n            describe: '提交查询申请'\n          },\n          {\n            title: '审核',\n            describe: '等待审核结果'\n          },\n          {\n            title: '查询',\n            describe: '审核完毕，进入查询页面'\n          }\n        ],\n        stepRules: {\n          opinion: [\n            { required: true, message: '请填写查询说明', trigger: 'blur' }\n          ],\n          timer: [\n            { required: true, message: '请填写查询时限', trigger: 'blur' }\n          ],\n          computer_room: [{\n            required: true,\n            message: '机房地址不得为空',\n            trigger: 'change'\n          }],\n          connection_name: [{\n            required: true,\n            message: '连接名不得为空',\n            trigger: 'change'\n          }],\n          basename: [{\n            required: true,\n            message: '数据库名不得为空',\n            trigger: 'change'\n          }],\n          person: [{\n            required: true,\n            message: '审核人不得为空',\n            trigger: 'change'\n          }]\n        },\n        item: {},\n        personlist: [],\n        computer_roomlist: util.computer_room,\n        datalist: {\n          connection_name_list: [],\n          basenamelist: [],\n          sqllist: [],\n          computer_roomlist: util.computer_room\n        }\n      }\n    },\n    methods: {\n      Connection_Name (val) {\n        this.datalist.connection_name_list = []\n        this.datalist.basenamelist = []\n        this.step.connection_name = ''\n        this.step.basename = ''\n        if (val) {\n          this.ScreenConnection(val)\n        }\n      },\n      ScreenConnection (val) {\n        this.datalist.connection_name_list = this.item.filter(item => {\n          if (item.computer_room === val) {\n            return item\n          }\n        })\n      },\n      handleSubmit () {\n        this.$refs['step'].validate((valid) => {\n          if (valid) {\n            axios.put(`${util.url}/query_worklf`, {\n              'mode': 'put',\n              'instructions': this.step.opinion,\n              'timer': this.step.timer,\n              'connection_name': this.step.connection_name,\n              'computer_room': this.step.computer_room,\n              'export': this.step.export,\n              'audit': this.step.person\n            })\n              .then(() => {\n                this.$router.push({\n                    name: 'queryready'\n                  })\n              })\n          }\n        });\n      }\n    },\n    mounted () {\n      axios.put(`${util.url}/workorder/connection`, {'permissions_type': 'query'})\n        .then(res => {\n          this.item = res.data['connection']\n          this.personlist = res.data['assigend']\n        })\n        .catch(error => {\n          util.ajanxerrorcode(this, error)\n        })\n      axios.put(`${util.url}/query_worklf`, {'mode': 'status'})\n        .then(res => {\n          if (res.data === 1) {\n            this.$router.push({\n              name: 'querypage'\n            });\n          } else if (res.data === 2) {\n            this.$router.push({\n              name: 'queryready'\n            });\n          }\n        })\n    }\n  }\n</script>\n\n<style lang=\"less\">\n  .step{\n    &-header-con{\n      text-align: center;\n      h3{\n        margin: 10px 0;\n      }\n      h5{\n        margin: 0 0 5px;\n      }\n    }\n    &-content{\n      padding: 5px 20px 26px;\n      margin-bottom: 20px;\n      border-bottom: 1px solid #dbdddf;\n    }\n    &-form{\n      padding-bottom: 10px;\n      border-bottom: 1px solid #dbdddf;\n      margin-bottom: 20px;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// work_flow.vue?aa6e2dd6","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".step-header-con{text-align:center}.step-header-con h3{margin:10px 0}.step-header-con h5{margin:0 0 5px}.step-content{padding:5px 20px 26px}.step-content,.step-form{margin-bottom:20px;border-bottom:1px solid #dbdddf}.step-form{padding-bottom:10px}\", \"\", {\"version\":3,\"sources\":[\"/Users/yeshaobin/Yearning/webpage/src/components/Search/work_flow.vue\"],\"names\":[],\"mappings\":\"AACA,iBACE,iBAAmB,CACpB,AACD,oBACE,aAAe,CAChB,AACD,oBACE,cAAgB,CACjB,AACD,cACE,qBAAuB,CAGxB,AACD,yBAHE,mBAAoB,AACpB,+BAAiC,CAMlC,AAJD,WACE,mBAAqB,CAGtB\",\"file\":\"work_flow.vue\",\"sourcesContent\":[\"\\n.step-header-con {\\n  text-align: center;\\n}\\n.step-header-con h3 {\\n  margin: 10px 0;\\n}\\n.step-header-con h5 {\\n  margin: 0 0 5px;\\n}\\n.step-content {\\n  padding: 5px 20px 26px;\\n  margin-bottom: 20px;\\n  border-bottom: 1px solid #dbdddf;\\n}\\n.step-form {\\n  padding-bottom: 10px;\\n  border-bottom: 1px solid #dbdddf;\\n  margin-bottom: 20px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-0edcd179\",\"scoped\":false,\"hasInlineConfig\":false}!./~/less-loader?{\"sourceMap\":true}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/Search/work_flow.vue\n// module id = 193\n// module chunks = 1 11","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0edcd179\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/less-loader/index.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./work_flow.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"51de479c\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-0edcd179\",\"scoped\":false,\"hasInlineConfig\":false}!./~/less-loader?{\"sourceMap\":true}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/Search/work_flow.vue\n// module id = 214\n// module chunks = 1 11","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('Row', [_c('Card', [_c('div', {\n    staticClass: \"step-header-con\"\n  }, [_c('h3', [_vm._v(_vm._s(_vm.stepData.title))]), _vm._v(\" \"), _c('h5', [_vm._v(_vm._s(_vm.stepData.describe))])]), _vm._v(\" \"), _c('p', {\n    staticClass: \"step-content\"\n  }), _vm._v(\" \"), _c('Row', [_c('i-col', {\n    attrs: {\n      \"span\": \"8\"\n    }\n  }, [_c('Alert', {\n    attrs: {\n      \"type\": \"warning\",\n      \"show-icon\": \"\"\n    }\n  }, [_vm._v(\"\\n          注意事项:\\n          \"), _c('span', {\n    attrs: {\n      \"slot\": \"desc\"\n    },\n    slot: \"desc\"\n  }, [_vm._v(\"\\n            1.必须填写查询说明\\n            \"), _c('br'), _vm._v(\"\\n            2.根据查询条件预估所需的查询时间\\n            \"), _c('br'), _vm._v(\"\\n            3.所有提交的查询语句均会进行审计记录\\n            \"), _c('br'), _vm._v(\"\\n            4.仅支持select语句,不可使用非查询语句\\n            \"), _c('br'), _vm._v(\"\\n            5.已限制最大limit数，如自己输入的limit数大于平台配置的最大limit数则已平台配置的Limit数为准\\n          \")])])], 1), _vm._v(\" \"), _c('i-col', {\n    attrs: {\n      \"span\": \"12\"\n    }\n  }, [_c('Form', {\n    ref: \"step\",\n    attrs: {\n      \"model\": _vm.step,\n      \"rules\": _vm.stepRules,\n      \"label-width\": 150\n    }\n  }, [_c('FormItem', {\n    attrs: {\n      \"label\": \"机房:\",\n      \"prop\": \"computer_room\"\n    }\n  }, [_c('Select', {\n    on: {\n      \"on-change\": _vm.Connection_Name\n    },\n    model: {\n      value: (_vm.step.computer_room),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"computer_room\", $$v)\n      },\n      expression: \"step.computer_room\"\n    }\n  }, _vm._l((_vm.datalist.computer_roomlist), function(i) {\n    return _c('Option', {\n      key: i,\n      attrs: {\n        \"value\": i\n      }\n    }, [_vm._v(_vm._s(i))])\n  }))], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"连接名:\",\n      \"prop\": \"connection_name\"\n    }\n  }, [_c('Select', {\n    attrs: {\n      \"filterable\": \"\"\n    },\n    model: {\n      value: (_vm.step.connection_name),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"connection_name\", $$v)\n      },\n      expression: \"step.connection_name\"\n    }\n  }, _vm._l((_vm.datalist.connection_name_list), function(i) {\n    return _c('Option', {\n      key: i.connection_name,\n      attrs: {\n        \"value\": i.connection_name\n      }\n    }, [_vm._v(_vm._s(i.connection_name))])\n  }))], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"审核人:\",\n      \"prop\": \"person\"\n    }\n  }, [_c('Select', {\n    attrs: {\n      \"filterable\": \"\"\n    },\n    model: {\n      value: (_vm.step.person),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"person\", $$v)\n      },\n      expression: \"step.person\"\n    }\n  }, _vm._l((_vm.personlist), function(i) {\n    return _c('Option', {\n      key: i,\n      attrs: {\n        \"value\": i\n      }\n    }, [_vm._v(_vm._s(i))])\n  }))], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"是否需要导出数据:\",\n      \"prop\": \"export\"\n    }\n  }, [_c('RadioGroup', {\n    model: {\n      value: (_vm.step.export),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"export\", $$v)\n      },\n      expression: \"step.export\"\n    }\n  }, [_c('Radio', {\n    attrs: {\n      \"label\": \"1\"\n    }\n  }, [_vm._v(\"是\")]), _vm._v(\" \"), _c('Radio', {\n    attrs: {\n      \"label\": \"0\"\n    }\n  }, [_vm._v(\"否\")])], 1)], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"查询说明：\",\n      \"prop\": \"opinion\"\n    }\n  }, [_c('Input', {\n    attrs: {\n      \"type\": \"textarea\",\n      \"autosize\": {\n        minRows: 4,\n        maxRows: 8\n      },\n      \"placeholder\": \"请填写查询说明\"\n    },\n    model: {\n      value: (_vm.step.opinion),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"opinion\", $$v)\n      },\n      expression: \"step.opinion\"\n    }\n  })], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"查询时限：\",\n      \"prop\": \"timer\"\n    }\n  }, [_c('Input', {\n    attrs: {\n      \"placeholder\": \"请填写查询时限，单位：分钟 （只填写数字）\"\n    },\n    model: {\n      value: (_vm.step.timer),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"timer\", $$v)\n      },\n      expression: \"step.timer\"\n    }\n  })], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"\"\n    }\n  }, [_c('Button', {\n    staticStyle: {\n      \"width\": \"100px\"\n    },\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.handleSubmit\n    }\n  }, [_vm._v(\"提交\")])], 1)], 1)], 1)], 1), _vm._v(\" \"), _c('Steps', {\n    staticStyle: {\n      \"margin-left\": \"10%\"\n    }\n  }, _vm._l((_vm.stepList1), function(item) {\n    return _c('Step', {\n      key: item.title,\n      attrs: {\n        \"title\": item.title,\n        \"content\": item.describe\n      }\n    })\n  }))], 1)], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-0edcd179\",\"hasScoped\":false}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Search/work_flow.vue\n// module id = 216\n// module chunks = 1 11","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0edcd179\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./work_flow.vue\")\n}\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./work_flow.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0edcd179\\\",\\\"hasScoped\\\":false}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./work_flow.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Search/work_flow.vue\n// module id = 81\n// module chunks = 1 11"],"sourceRoot":""}